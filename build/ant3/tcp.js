"use strict";function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,o){for(var t=0;t<o.length;t++){var n=o[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,o,t){return o&&_defineProperties(e.prototype,o),t&&_defineProperties(e,t),e}var net=require("net"),Errors=require("./errors"),TCP=function(){function n(e){var o=e.path,t=e.timeout;_classCallCheck(this,n),this.path=o||"localhost:18130",this.timeout=t||3e4,this.socket=new net.Socket,this.socket.on("data",function(e){console.log("DATA: "+e)}),this.socket.on("close",function(e){console.log("close",e)}),this.socket.setTimeout(this.timeout),this.socket.on("timeout",function(){console.log("timeout")})}return _createClass(n,[{key:"open",value:function(){var o=this;return this.socket.writable||this.socket.connect(18130,"localhost",function(e){console.log("connect",e),console.log(o.socket.address())}),this}},{key:"send",value:function(e,o){var t=this;this.socket.on("connect",function(){console.log("connect"),t.socket.write(JSON.stringify(e),function(e){console.log("write",e)})}),this.socket.on("drain",function(e){console.log("drain",e)}),this.socket.on("error",function(e){console.log("error",e)}),console.log("send")}}]),n}();module.exports=TCP;