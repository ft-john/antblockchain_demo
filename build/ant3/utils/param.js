"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var utf8=require("./utf8"),BigNumber=require("bignumber.js"),CryptoJS=require("crypto-js"),_sha=require("crypto-js/sha3"),Buffer=require("safe-buffer").Buffer;module.exports={sha3:function(t,r){return"hex"===r&&(2<t.length&&"0x"===t.substr(0,2)&&(t=t.substr(2)),t=CryptoJS.enc.Hex.parse(t)),_sha(t,{outputLength:256}).toString()},getHash:function(t,r){var e="0x";r&&(e="");var n=t.toString("hex");if(this.isString(t)){if("0x"!==t.substr(0,2))return e+CryptoJS.SHA256(t).toString();n=t.substr(2)}var f=CryptoJS.enc.Hex.parse(n);return e+CryptoJS.SHA256(f).toString(CryptoJS.enc.Hex)},isBuffer:function(t){return Buffer.isBuffer(t)},isBigNumber:function(t){return t&&(t instanceof BigNumber||t.constructor&&"BigNumber"===t.constructor.name)},isString:function(t){return"string"==typeof t||t&&t.constructor&&"String"===t.constructor.name},isBoolean:function(t){return"boolean"==typeof t},isObject:function(t){return null!==t&&!Array.isArray(t)&&"object"===_typeof(t)},isArray:function(t){return Array.isArray(t)},isFunction:function(t){return"function"==typeof t},toBuffer:function(t,r){if(this.isBuffer(t))return t;"number"==typeof t&&(t=t.toString(16)),this.isString(t)&&0===t.indexOf("0x")&&(t=t.slice(2)),r||(r=Math.ceil(t.length/2));for(var e=Buffer.alloc(r),n=0;n<r;n++){var f=t.slice(2*n,2*n+2)||"00";e.write(f,n,1,"hex")}return e},padStart:function(t,r,e){return t.length<parseInt(r)?new Array(parseInt(r)-t.length+1).join(e||"0")+t:t},padLeft:function(t,r,e){return this.padStart(t,r,e)},padEnd:function(t,r,e){return t.length<parseInt(r)?t+new Array(parseInt(r)-t.length+1).join(e||"0"):t},padRight:function(t,r,e){return this.padEnd(t,r,e)},toBigNumber:function(t,r){return t=t||0,this.isBigNumber(t)?t:this.isString(t)?0===t.indexOf("0x")||0===t.indexOf("-0x")?new BigNumber(t.replace("0x",""),16):new BigNumber(t,r||16):new BigNumber(t.toString(10),10)},toDecimal:function(t,r){return this.toBigNumber(t,r).toNumber()},decimalToHex:function(t,r){var e="0x";r&&(e="");var n=this.toBigNumber(t),f=n.toString(16);return n.lessThan(0)?"-"+e+f.substr(1):e+f},stringToHex:function(t,r){return this.decimalToHex(t,r)},asciiToHex:function(t,r){for(var e="",n=0;n<t.length;n++){var f=t.charCodeAt(n).toString(16);e+=f.length<2?"0"+f:f}return"0x"+this.padEnd(e,r)},utf8ToHex:function(t,r,e){t=utf8.encode(t);for(var n="",f=0;f<t.length;f++){var i=t.charCodeAt(f);if(0===i){if(!r)break;n+="00"}else{var o=i.toString(16);n+=o.length<2?"0"+o:o}}var u="0x";return e&&(u=""),u+n},bufferToHex:function(t,r){var e="0x";return r&&(e=""),this.isBuffer(t)?e+t.toString("hex"):this.toHex(t,r)},fromUtf8:function(t,r){return this.utf8ToHex(t,r)},toAscii:function(t,r){var e="",n=0;for("0x"===t.substring(0,2)&&(n=2);n<t.length;n+=2){var f=parseInt(t.substr(n,2),16);if(r&&0===f)break;e+=String.fromCharCode(f)}return e},toUtf8:function(t){return utf8.decode(this.toAscii(t))},toHex:function(t,r){if(this.isBoolean(t))return this.decimalToHex(+t,r);if(this.isBigNumber(t))return this.decimalToHex(t,r);if("object"===_typeof(t))return this.utf8ToHex(JSON.stringify(t),!1,r);if(this.isString(t)){if(0===t.indexOf("-0x"))return this.stringToHex(t,r);if(0===t.indexOf("0x"))return t;if(!isFinite(t))return this.utf8ToHex(t,1,r)}return this.decimalToHex(t,r)},toTwosComplement:function(t){var r=this.toBigNumber(t).round();return r.lessThan(0)?new BigNumber("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16).plus(r).plus(1):r},getUInt32BE:function(t){var r=new Buffer(4);return r.writeUInt32BE(t),r.toString("hex")},hexToBuffer:function(t){return this.isString(t)?("0x"===t.substr(0,2)&&(t=t.substr(2)),Buffer.from(t,"hex")):t},stringToBase64:function(t){return Buffer.from(t).toString("base64")}};